pipeline{
  agent any 
  stages{
    stage('check out'){
      steps{
        git 'https://github.com/Steephanjeyaraj/HelloWorld.git'
        }
    }
    stage('taurus execution'){
      steps{
        bzt 'Google.yml -o settings.artifacts-dir="C:\\Users\\steephan\\Desktop\\BlazeMeter\\jenkiks-${JOB_NAME}-${BUILD_NUMBER}"'
      }
    }
    stage('Result Collation'){
      def command = "java -jar TaurusOutputConverter.jar C:\Users\steephan\Desktop\BlazeMeter\jenkiks-${JOB_NAME}-${BUILD_NUMBER}\kpi.jtl C:\Users\steephan\Desktop\BlazeMeter\jenkiks-${JOB_NAME}-${BUILD_NUMBER}\jmeterOutput.jtl"
      def process = command.execute()
      process.waitFor()
      def output = process.in.text
      log.info output
      jmeter -g "C:\\Users\\steephan\\Desktop\\BlazeMeter\\jenkiks-${JOB_NAME}-${BUILD_NUMBER}\\jmeterOutput.jtl" -o "C:\\Users\\steephan\\Desktop\\BlazeMeter\\jenkiks-${JOB_NAME}-${BUILD_NUMBER}\\Test-report"
    }
  }
}
